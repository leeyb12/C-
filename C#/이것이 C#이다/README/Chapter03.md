# 03. 데이터 보관하기

## 3.1 다양한 데이터 종류
- 모든 데이터의 형식의 근간을 이루는 "기본 데이터 형식(Primitive Type)"과 상수(Constants), 열거형(Enumerator)를 배운다.
- "기본 데이터 형식(Primitive Type)"과 "복합 데이터 형식(Complex Data Type)"이 있다. 
  ```mermaid
  flowchart LR
  subgraph T1["데이터 형식"]
    A["기본 데이터 형식"]
    B["복합 데이터 형식"]
  end
  ```
- 복합 데이터 형식에는 구조체와 클래스, 배열 등이 있다.
- 데이터 형식은 기본 데이터 형식과 복합 데이터 형식, 값 형식과 참조 형식으로 분류할 수 있다.

<br><br>

## 3.2 변수 
- 제일 먼저 데이터의 형식을 명시하고 변수 식별자(이름)을 명시한 후 `;`로 문장을 종결하여 변수를 선언한다. 예) `int x;`
  - 이렇게 하면 컴파일러는 int 형식을 위해 메모리 공간을 할당하고 x라는 식별자가 사용할 수 있도록 준비한다. 
- 선언된 변수 x는 대입 연산자를 통해 데이터를 입력할 수 있다. 예) `x = 100;`
  - 이를 통해 x에 할당된 메모리 공간에 데이터 100이 기록된다. 
  - 초기화란, 변수에 최초의 데이터를 할당하는 것을 의미한다. 
```cs
int x; x = 100;
int y = 100;
int a = 30, b, c = 0, d;
```

<br><br>

## 3.3 값 형식과 참조 형식
- 값 형식(Value Type)은 변수가 값을 담는 데이터 형식을 말한다.
- 참조 형식(Reference Type)은 변수가 값 대신 값이 있는 곳의 위치를 담는 데이터 형식이다.
- C#에서 사용하는 두 가지 메모리 영역인 스택(Stack), 힙(Heap)
- 값 형식과 관련있는 것은 스택 메모리 영역, 참조 형식과 관련있는 것은 힙 메모리 영역이다.

### 3.3.1 스택과 값 형식

```cs
{ // 코드 블록 시작
    int a = 100;
    int b = 200;
    int c = 300;
} // 코드 블록 끝
```
- 코드에 선언된 세 변수 a, b, c는 차례로 스택에 쌓였다가 코드블록이 끝나면서 스택에 걷혀 제거된다. a > b > c 순으로 스택에 쌓였다가, c > b > a 순으로 스택에 빠져 나간다.
- 코드블록 안에 생성된 모든 값 형식의 변수들은 프로그램 실행이 중괄호"}"를 만나면 메모리에서 제거된다.
- 아래 표는 스택 메모리에 할당되는 과정을 보여준다.

| { | int a = 10; | int b = 20; | int c = 30; |    }   |        |   |
|:-:|:-----------:|:-----------:|:-----------:|:------:|:------:|---|
|   |             |             | c : 30      |        |        |   |
|   |             | b : 20      | b : 20      | b = 20 |        |   |
|   | a : 10      | a : 10      | a : 10      | a : 10 | a : 10 |   |

<br>

### 3.3.2 힙과 참조 형식

- 힙은 저장된 `데이터를 스스로 제거하는 메커니즘을 갖고 있지 않다.`
- 대신 CLR 가비지 컬렉터(Garbage Collector)가 제거한다.
  - 가비지 컬렉터는 프로그램 뒤에 숨어서 동작하면서, 힙에 더 이상 사용하지 않는 객체가 있으면 그 객체를 쓰레기로 간주하고 수거하는 기능을 한다.
- 힙은 코드블록이 끝나는 시점에 상관없이 데이터를 유지한다.
- 따라서 CLR에 메모리 영역을 제공한다.
- 힙 영역에는 데이터를 저장하고, 스택 영역에는 데이터가 저장된 힙 메모리의 주소를 저장한다.
- 이를 "참조"한다고 한다.
  ```cs
  {
    object a = 10;
    object b = 20;
  }
  ```
- CLR이 이 코드를 실행하면, 실제 값은 힙에 저장되고, a와 b는 값이 저장된 힙 주소만 스택에 저장된다.

|